<!-- <p>Competences</p>
<button mat-flat-button
    class="pull-right modal_open button_hover_effect mt-2 ripple Button_shap_effact" (click)="addCompModal()">
    <i class="fas fa-plus fa-fw"></i>
    <span> Add</span>
</button> -->
<!-- <mat-sidenav-container class="example-container fullHeight" autosize>
    <mat-sidenav-content> -->
<div class="row m-0">
    <div class="col-12 responsive-row">
        <div class="row">
            <div class="col-12 ">
                <div class="card">
                    <div class="card-block">
                        <div class="card-title h5 mb-1 d-inline-block w-100"><span class="learner_title">Competences</span>
                            <button mat-flat-button color="primary" class="pull-right button_hover_effect add_learner_btn ripple Button_shap_effact" (click)="addCompModal()">
                                        <i class="fas fa-plus fa-fw"></i>
                                        <span> Add</span>
                                    </button>
                                </div>
                                <div>
                                    <div class="table-responsive">
                                        <table mat-table [dataSource]="dataSource" matSort
                                            class="table table-borderless" multiTemplateDataRows>
                                            <!-- TITLE -->
                                            <ng-container matColumnDef="title">
                                                <th class="text-center" mat-header-cell *matHeaderCellDef> Title </th>
                                                <td mat-cell class="text-center mat-table-cell" *matCellDef="let element"> {{element.title}}
                                                </td>
                                            </ng-container>
                                            <!-- X Date -->
                                            <ng-container matColumnDef="xDate">
                                                <th class="text-center" mat-header-cell *matHeaderCellDef> Expiry Date
                                                </th>
                                                <td mat-cell class="text-center mat-table-cell" *matCellDef="let element">
                                                    {{element.expiryDate | date:shortDate}} </td>
                                            </ng-container>
                                            <!-- Valid -->
                                            <ng-container matColumnDef="valid">
                                                <th class="text-center" mat-header-cell *matHeaderCellDef> Valid </th>
                                                <td mat-cell class="text-center mat-table-cell" *matCellDef="let element">
                                                    <div *ngIf="element.isValid == false">
                                                        <i class="fa fa-times"></i>
                                                    </div>
                                                    <div *ngIf="element.isValid == true">
                                                        <i class="fa fa-check"></i>
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <!-- Attachments -->
                                            <ng-container matColumnDef="attachment">
                                                <th class="text-center" mat-header-cell *matHeaderCellDef> Attachments
                                                </th>
                                                <td mat-cell class="text-center mat-table-cell" *matCellDef="let element">
                                                    <div
                                                        *ngIf="element.files && element.files">
                                                        {{element.files.length}}
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <!-- Actions -->
                                            <ng-container matColumnDef="action">
                                                <th class="text-center" mat-header-cell *matHeaderCellDef> Actions </th>
                                                <td mat-cell class="text-center mat-table-cell" *matCellDef="let element; let i = index">
                                                    <a mat-button class="text-success"
                                                        (click)="openFileUpload(element,i)"
                                                        placement="bottom" ngbTooltip="Attachments" triggers="hover"
                                                        tooltipClass="tooltip-class">
                                                        <i class="fa fa-paperclip"></i>
                                                    </a>
                                                    <a mat-button class="text-success" (click)="editCompModal(element)"
                                                        placement="bottom" ngbTooltip="Edit" triggers="hover"
                                                        tooltipClass="tooltip-class">
                                                        <i class="fa fa-edit"></i>
                                                    </a>
                                                    <a mat-button class="delete_button" (click)="delete(element, i)" placement="bottom" ngbTooltip="Delete"
                                                        triggers="hover" tooltipClass="tooltip-class">
                                                        <i class="fa fa-trash"></i>
                                                    </a>
                                                </td>
                                            </ng-container>
                                            <!-- Expandable data -->
                                            <ng-container matColumnDef="expandedDetail">
                                                <td mat-cell *matCellDef="let element" 
                                                    [attr.colspan]="displayedColumns.length">
                                                    <div class="example-element-detail"
                                                        [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                                                        <div *ngIf="allFiles && allFiles.length > 0">
                                                            <div *ngFor="let file of allFiles">
                                                                <file-tile (deletedFile)="deletedFile($event)" [competencieId]="expandedElement._id"
                                                                    (openSideNav)="fileDetails($event)" [file]="file">
                                                                </file-tile>
                                                            </div>
                                                        </div>
                                                    </div>
                                                <!-- </div>
                                            </div> -->

                                        </td>
                                    </ng-container>
                                    <thead>
                                        <tr style="background:lightgray;" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    </thead>
                                    <tbody>
                                        <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="example-element-row" [class.example-expanded-row]="expandedElement === element" (click)="expand(element)"></tr>
                                        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- </mat-sidenav-content>
    <mat-sidenav #sidenav mode="side" position="end" class="expansion_tab">
        <div class="d-inline-block w-100">
            <div class="float-left title_display" *ngIf="file">
                {{file.title}}
            </div>
            <mat-button class="close_btn text-primary float-right" (click)="sidenav.close()"><i
                    class="fa fa-times-circle" aria-hidden="true"></i></mat-button>
        </div>
        <app-file-details [details]="file" [isCompetency]="true" (fileDeleted)="deleteFile($event)">
        </app-file-details>
    </mat-sidenav>
</mat-sidenav-container> -->